<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="shortcut icon" href="../favicon.ico">
        <title>Emma Blatt</title>

        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- CSS -->
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
        <link href="https://fonts.googleapis.com/css?family=PT+Serif" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">

        <link rel="stylesheet" href="../style.css">
        <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
                <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-99791126-1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'UA-99791126-1');
        </script>
    </head>

    <body class="open-sans">
        <div class="pb-5 d-none d-md-block"></div>
        <a class="d-none d-md-block text-grey pl-4 link zindex-sticky" style="position: fixed; z-index=1;" href="../index.html">back</a>
        <a class="d-block d-sm-block d-md-none text-grey pl-1 link zindex-sticky" style="position: fixed; z-index=1;" href="../index.html">back</a>
        <div class="mt-5 pt-5"></div>
        <div class="container">
            <div class="row d-flex justify-content-between">
                <div class="col-md-4 d-flex mx-2">
                    <h3 class="pt-serif">
                        —Inductive Charger
                    </h3>
                </div>
                <div class="col-md-7 d-flex flex-column mx-2">
                    <p class="text-dark-grey mb-2">
                        I designed and built an inductive charging system for a phone that does not natively support wireless charging.
                    </p>
                    <p class="mb-0"><b>Tools</b>: Altium Designer, LTSpice, Oscilloscope </p>
                    <p><b>Keywords</b>: flyback converter, wireless transmitter/receiver, LC oscillator</p>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="mt-5 mb-2 col-md-9 container embed-responsive embed-responsive-21by9">
            <div class="d-flex justify-content-center">
            </div>
        </div>

        <div style="background-color: #f9f9f9;">
            <div class="container py-5">
                <div class="row mb-3">
                    <div class="col-md-4">
                        <h4 class="pt-serif">—Inspiration</h4>
                    </div>
                    <div class="col-md">
                        <p>I have an old iPhone SE from 2015 and I feel left out from the simplicity and ease of wireless charging. I wanted to design a system so I could pretend like my phone has wireless charging. </p>
                        <p>To do this, I can mount the receiver to the back of my phone and connect the output to a wired charging cable. My design is spec'ed to allow 500mA charging at 5V.</p>
                        <p class="mt-3">Power flow diagram for inductive charger:</p>
                        <div class="col-md-4 d-none d-md-block"></div>
                        <div class="mx-auto col-md-8">
                            <img src="../img/inductivecharger/powerflow.png" class="img-fluid" />
                            <div class="d-flex justify-content-center">
                                <figcaption class=" mb-5 figure-caption">Based on simulation and calculation</figcaption>
                            </div>
                        </div>
                        <p>I designed each block independently, and worked backwards from load to specify power requirements and tune/bias circuits.</p>
                    </div>
                </div>
            </div>
        </div>

        <div style="background-color: white;">
            <div class="container py-5">
                <div class="row">
                    <div class="col-md-4">
                        <h4 class="pt-serif">—Wireless Link</h4>
                    </div>
                    <div class="col-md">
                        <p>Starting with the heart of the circuit: the wireless link. Since the receiver (connected to the phone) will only be used with one transmitter, the simplest way to transmit power is at a set frequency with magnetic resonant charging. </p>
                        <p>Since it's at a fixed frequency and fixed power output, I decided to design the circuits without use of transmitter or receiver ICs (definitely NOT Qi-compatible). </p>
                    </div>
                </div>
                <div class="row py-3">
                    <div class="col-md-4">
                        <h5 class="pt-serif">Principle of Operation</h5>
                    </div>
                    <div class="col-md">
                        <p>Wireless charging is inherently less efficient (50% to 70%) than wired charging (80% to 98%). As a result, it is desirable to couple the coils in such a way that the maximum amount of energy can be transferred. Magnetic resonant coupling relies on an oscillating magnetic field to couple magnetic energy between two coils operating at the same resonant freqency. This is less efficient if the system needs to be compatible across a wide range of transmitters/receivers, but more efficient for a single TX/RX combination.</p>
                        <ul>Key parameters:
                            <li>Q-factor: Maximize TX Q-factor (wo*L/R) to minimize loss in transmission</li>
                            <li>Coil geometry: Maximum coupling coefficient (k) when TX and RX coils are the same size</li>
                            <li>Turns ratio: Higher turns ratio to maximize magnetic energy can be coupled to the receiver</li>
                            <li>DC Resistance: Minimize DC resistance to reduce losses </li>
                        </ul>
                </div>
                <div class="row py-3">
                    <div class="col-md-4">
                        <h5 class="pt-serif">Wurth Electronics WPT Design Tool </h5>
                    </div>
                    <div class="col-md">
                        <p>Keeping the key parameters in mind, I used the WE wireless power transfer design tool to choose a compatible combination of coils. </p>
                    </div>
                    <div class="col-md-4 d-none d-md-block"></div>
                    <div class="col-md d-flex">
                        <div class="row">
                            <div class="col-md">
                                <img src="../img/inductivecharger/we_graphs.png" class="img-fluid" />
                            </div>
                            <div class="col-md">
                                <img src="../img/inductivecharger/we_resonance.png" class="img-fluid" />
                            </div>
                        </div>
                    </div>
                </div>
              
            </div>
        </div>

        <div style="background-color: #f9f9f9">
            <div class="container py-5">
                <div class="row">
                    <div class="col-md-4">
                        <h4 class="pt-serif">—LC Oscillator</h4>
                    </div>
                    <div class="col-md">
                        <p>The rectified voltage from the TX AC/DC converter goes to the LC oscillator to create a time-varying voltage that can be transmitted over the coils.</p>
                        <p>I chose to design a Colpitts Oscillator, which consists of an oscillator and a positive feedback network, where one of the reactive elements feeds back to the input. </p>
                    </div>
                </div>
            </div>
        </div>






        <div style="background-color:  white;">
            <div class="container py-5">
                <div class="row">
                    <div class="col-md-4">
                        <h4 class="pt-serif">—Coil Sourcing</h4>
                    </div>
                    <div class="col-md">
                        <p>I sourced a set of RX/TX coils that have a turns ratio of ~1:1.31. So Vs = 1.31Vp.</p>
                        <p>I looked into doing resonant coupling, but research shows that inductive coupling is more efficient than resonant coupling because ______. </p>
                        <div class="d-flex justify-content-center mb-3" style="height: 400px;">
                            <img src="../img/inductivecharger/coils.png" class="img-fluid h-100"  />
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div style="background-color: #f9f9f9">
            <div class="container py-5">
                <div class="row">
                    <div class="col-md-4">
                        <h4 class="pt-serif">—RX AC/DC Converter</h4>
                    </div>
                    <div class="col-md">
                        <p>For the receiver side, I designed a simple full bridge rectifier circuit to create a relatively stable input to the LDO.</p>
                        <p>I used schottky power diodes with a forward voltage drop of 220mV at 1A to lower power loss. </p>
                        <div class="d-flex justify-content-center mb-3" style="height: 400px;">
                            <img src="../img/inductivecharger/rxacdc.png" class="img-fluid h-100"  />
                        </div>
                        <div class="d-flex justify-content-center mb-3" style="height: 400px;">
                            <img src="../img/inductivecharger/rxacdc_output.png" class="img-fluid h-100"  />
                        </div>
                        <p>The AC/DC creates an output of ~6.2V, which will be fed to the LDO. I tuned the output capacitor based on the following equation: Vpp = Iload/2*f*C</p>
                    </div>
                </div>
            </div>
        </div>




        <div style="background-color: white;">
            <div class="container py-5">
                <div class="row">
                    <div class="col-md-4">
                        <h4 class="pt-serif">—LDO</h4>
                    </div>
                    <div class="col-md">
                        <p>For fun, I wanted to design a discrete LDO using an op-amp to better understand the mechanism and explore different design parameters. For the final design, I wanted Vout to be ~5.2V so that when it reaches the phone it will be around 5V (tolerance for DCR drop).</p>

                    </div>
                    <div class="row py-3">
                        <div class="col-md-4">
                            <h5 class="pt-serif">First Iteration</h5>
                         </div>
                         
                        <div class="col-md">
                            <p>First I chose the simplest possible design. I used a voltage source for the reference voltage, an ideal op-amp, a separate source for Vin, and set Iload = 150mA. Since the voltage reference has poor load driving capabilities, it is only used as a reference for the op-amp. R1 controls the current through the zener diode. The PMOS is the pass element in the feedback system, so when a difference between the inverting and non-inverting terminal is detected, it will turn on and allow current to flow from input to output. </p>
                            <div class="d-flex justify-content-center mb-3" style="height: 400px;">
                                <img src="../img/inductivecharger/ldo1.png" class="img-fluid h-100"  />
                            </div>
                            <div class="d-flex justify-content-center">
                                <figcaption class=" mb-5 figure-caption">First iteration of LDO design - Vout = Vref x (1+R1/R2)</figcaption>
                            </div>
                            <p>To regulate output voltage, the feedback loop controls RDS of the FET. As Vin approaches Vout, the error amplifier (in this case, an op-amp) will drive VGS more negative to lower RDS and maintain regulation.</p>
                        </div>
                    </div>


                    <div class="row py-3">
                        <div class="col-md-4">
                            <h5 class="pt-serif">Voltage reference</h5>
                         </div>
                         
                        <div class="col-md">
                            <p>The reference voltage has to be stable across a range of input voltages, namely 6V to 9V. This means that the reference voltage cannot vary with load current or input voltage. </p>
                            <p>I used a zener diode to set the reference voltage.</p>
                            <div class="d-flex justify-content-center mb-3" style="height: 400px;">
                                <img src="../img/inductivecharger/zener_ref.png" class="img-fluid h-100"  />
                            </div>
                            <div class="d-flex justify-content-center mb-3" style="height: 400px;">
                                <img src="../img/inductivecharger/sweep_zener_current.png" class="img-fluid h-100"  />
                            </div>
                            <div class="d-flex justify-content-center mb-3" style="height: 400px;">
                                <img src="../img/inductivecharger/sweep_zener_voltage.png" class="img-fluid h-100"  />
                            </div>
                            <div class="d-flex justify-content-center">
                                <figcaption class=" mb-5 figure-caption">Sweep Vin from 6V to 9V, zener diode current increases from 20mA to 65mA and zener diode voltage drop decreases from 4.767V to 4.7V.</figcaption>
                            </div>
                            <p>When the input voltage is kept constant (i.e. 6V) and load current is swept from 100mA to 500mA, the output voltage is relatively stable.</p>
                            <div class="d-flex justify-content-center mb-3" style="height: 400px;">
                                <img src="../img/inductivecharger/sweep_load_current.png" class="img-fluid h-100"  />
                            </div>
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>


        <div style="background-color: white">
            <div class="container py-5">
                <div class="row">
                    <div class="col-md-4">
                        <h4 class="pt-serif">—Simulation</h4>
                    </div>
                    <div class="col-md">
                        <p>Before prototyping the circuit, I downloaded LTSpice models and simulated the second-half of the circuit (from the comparator to the output) to ensure proper functionality.</p>
                        <img src="../img/classdamp/amp_sim.png" class="img-fluid"/>
                    </div>
                </div>
            </div>
        </div>

        <div style="background-color: white;">
            <div class="container py-5">
                <div class="row">
                    <div class="col-md-4">
                        <h4 class="pt-serif">—Schematic</h4>
                    </div>
                    <div class="col-md">
                        <img src="../img/classdamp/amp_schematic.png" class='img-fluid'/>
                    </div>
                </div>
            </div>
        </div>
                

 
        <div style="background-color: white;">
            <div class="container py-5">
                <div class="row">
                    <div class="col-md-4">
                        <h4 class="pt-serif">—Prototype</h4>
                    </div>
                    <div class="col-md">
                        <p>Before designing the PCB layout, I breadboarded the circuit to tune the deadtime generator circuit and verify circuit functionality. </p>
                        <img src="../img/classdamp/prototype_setup.jpeg" class="img-fluid mb-3" />
                        <div class="row">
                            <div class="d-flex flex-column col-md">
                                <img src="../img/classdamp/comparator_prototype.JPG" class="img-fluid" style="height: 251px;" />
                                <div class="d-flex justify-content-center">
                                    <figcaption class=" mb-3 figure-caption">Green = audio input, Yellow = 200kHz triangle wave</figcaption>
                                </div>
                            </div>
                            <div class="d-flex flex-column col-md">
                                <img src="../img/classdamp/deadtime_prototype.JPG" class="img-fluid" />
                                <div class="d-flex justify-content-center">
                                    <figcaption class=" mb-3 figure-caption">Fixed deadtime insertion</figcaption>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="d-flex flex-column col-md">
                                <img src="../img/classdamp/level_shift_prototype.JPG" class="img-fluid" style="height: 256px;" />
                                <div class="d-flex justify-content-center">
                                    <figcaption class=" mb-3 figure-caption">Level shifted NMOS and PMOS gate drivers</figcaption>
                                </div>
                            </div>
                            <div class="d-flex flex-column col-md">
                                <img src="../img/classdamp/half_bridge_output.JPG" class="img-fluid" />
                                <div class="d-flex justify-content-center">
                                    <figcaption class=" mb-3 figure-caption">Amplified digital signal</figcaption>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>  
            </div>
        </div>
               
        <div style="background-color: #f9f9f9;">
            <div class="container py-5">
                <div class="row">
                    <div class="col-md-4">
                        <h4 class="pt-serif">—Modifications</h4>
                    </div>
                    <div class="col-md">
                        <p>After verifying that the board functioned as expected, I started to design the board layout. I decided to power it with a single supply rail, so I had to make some modifications to the circuit. I added in a delay to the turn on time of the NMOS driver so the charge pump capacitor at the gate of the PMOS had time to charge. I also re-biased the gate drivers so the PMOS and NMOS can turn on. </p>
                        <img src="../img/classdamp/amp_schematic_final.png" class="img-fluid" />
                    </div>

                </div>
            </div>
        </div>
        <div style="background-color: white;">
            <div class="container py-5">
                <div class="row">
                    <div class="col-md-4">
                        <h4 class="pt-serif">—Board Layout</h4>
                    </div>
                    <div class="col-md">
                        <p>I designed a 4-layer board that is powered using a USB-C charger. I researched splitting (or partitionign) the analog ground and switching ground, but decided to use one ground reference and keep it clean by having the layer very close (3mil) to the power plane, and using bypass capacitors and bulk capacitors to filter noise and keep the power signals steady (respectively). </p>
                        <p>I opted for an LDO to get the +5V0 reference voltage for the op-amps and logic gates. I calculated the current draw on the +5V0 plane at 200kHz (the switching frequency), then used the LDO's datasheet to calculate power dissipation. Since the +5V0 line only draws ~5mA, I opted for the cheaper solution. I via-stitched around the regulated voltage to dissipate heat</p>
                        <p>I also used via stitching to connect the ground planes together (the bottom layer, the second layer, and part of the top layer).</p>
                        <div class="row">
                            <div class="d-flex flex-column col-md">
                                <img src="../img/classdamp/board_layout.png" class="img-fluid" style="height: 242px;" />
                                <div class="d-flex justify-content-center">
                                    <figcaption class=" mb-3 figure-caption">Top Layer</figcaption>
                                </div>
                            </div>
                            <div class="d-flex flex-column col-md">
                                <img src="../img/classdamp/layout_power.png" class="img-fluid" />
                                <div class="d-flex justify-content-center">
                                    <figcaption class=" mb-3 figure-caption">Power Plane</figcaption>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
                
        <div style="background-color: white;">
            <div class="container py-5">
                <div class="row">
                    <div class="col-md-4">
                        <h4 class="pt-serif">—Improvements</h4>
                    </div>
                    <div class="col-md">
                        <p> I designed a CCM flyback for the first prototype, but the transformers required were expensive and physically large.</p>
                    </div>
                </div>
            </div>
            <div class="container pb-3 d-none d-lg-block">
                <div class="row d-flex align-items-center col-md-9 mx-auto">
                    <div class="col-md-auto">
                        <a class=" text-grey link" href="../index.html">home</a>
                    </div>
                    <div class="col-md-auto">
                        <a class=" text-grey link" href="uwrobotics.html">robotics</a>
                    </div>
                    <div class="col-md-auto">
                        <a class=" text-black link" href="classdamp.html">class-d amp</a>
                    </div>
                    <div class="col-md-auto">
                        <a class=" text-grey link" href="pressuresensor.html">pressure-sensor LED array</a>
                    </div>
                    <div class="col-md-auto">
                        <a class=" text-grey link" href="workshops.html">workshops</a>
                    </div>
                    <div class="col-md-auto">
                        <a class=" text-grey link" href="safe.html">secret knock safe</a>
                    </div>
                </div>
            </div>
        </div>

        

    </body>
</html>